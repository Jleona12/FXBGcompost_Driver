# Project Structure

```
FXBGcompost_Driver/
â”‚
â”œâ”€â”€ ğŸ“„ Documentation
â”‚   â”œâ”€â”€ README.md              # Comprehensive project documentation
â”‚   â”œâ”€â”€ SETUP.md               # Detailed setup guide with database schema
â”‚   â”œâ”€â”€ QUICKSTART.md          # 5-minute quick start guide
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md     # Implementation summary
â”‚   â””â”€â”€ STRUCTURE.md           # This file - project structure overview
â”‚
â”œâ”€â”€ âš™ï¸ Configuration
â”‚   â”œâ”€â”€ .env.local.example     # Environment variables template
â”‚   â”œâ”€â”€ .eslintrc.json         # ESLint configuration
â”‚   â”œâ”€â”€ .gitignore             # Git ignore rules
â”‚   â”œâ”€â”€ next.config.js         # Next.js + PWA configuration
â”‚   â”œâ”€â”€ tailwind.config.ts     # Tailwind CSS with brand colors
â”‚   â”œâ”€â”€ tsconfig.json          # TypeScript configuration
â”‚   â”œâ”€â”€ postcss.config.js      # PostCSS configuration
â”‚   â””â”€â”€ package.json           # NPM dependencies and scripts
â”‚
â”œâ”€â”€ ğŸ¨ Application (app/)
â”‚   â”œâ”€â”€ layout.tsx             # Root layout with PWA meta tags
â”‚   â”œâ”€â”€ page.tsx               # Home page - Route list
â”‚   â”œâ”€â”€ globals.css            # Global styles with FXBG branding
â”‚   â”‚
â”‚   â”œâ”€â”€ route/[routeId]/
â”‚   â”‚   â””â”€â”€ page.tsx           # Route detail page with stops and map
â”‚   â”‚
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ routes/[routeId]/
â”‚       â”‚   â””â”€â”€ route.ts       # GET - Fetch stops for a route
â”‚       â””â”€â”€ pickups/
â”‚           â””â”€â”€ route.ts       # POST - Log pickup events
â”‚
â”œâ”€â”€ ğŸ§© Components (components/)
â”‚   â”œâ”€â”€ Header.tsx             # App header with FXBG logo
â”‚   â”œâ”€â”€ RouteList.tsx          # List of available routes
â”‚   â”œâ”€â”€ StopList.tsx           # List of stops for a route
â”‚   â”œâ”€â”€ StopCard.tsx           # Individual stop detail card
â”‚   â”œâ”€â”€ ContactWidget.tsx      # Phone/SMS contact links
â”‚   â”œâ”€â”€ PickupLogger.tsx       # Pickup logging form with validation
â”‚   â”œâ”€â”€ MapWidget.tsx          # Google Maps integration
â”‚   â””â”€â”€ OfflineIndicator.tsx   # Online/offline status banner
â”‚
â”œâ”€â”€ ğŸ“š Library (lib/)
â”‚   â”œâ”€â”€ supabase.ts            # Supabase client configuration
â”‚   â”œâ”€â”€ types.ts               # TypeScript type definitions
â”‚   â””â”€â”€ utils.ts               # Helper functions (validation, formatting, offline queue)
â”‚
â””â”€â”€ ğŸŒ Public Assets (public/)
    â”œâ”€â”€ manifest.json          # PWA manifest
    â”œâ”€â”€ favicon.ico            # Favicon (placeholder)
    â”œâ”€â”€ sw.js                  # Service worker (auto-generated)
    â””â”€â”€ workbox-*.js           # Workbox files (auto-generated)
```

## File Purposes

### Documentation
- **README.md**: Complete project documentation with features, setup, and deployment
- **SETUP.md**: Step-by-step setup guide with database schema SQL
- **QUICKSTART.md**: Get running in 5 minutes
- **PROJECT_SUMMARY.md**: Implementation details and architecture
- **STRUCTURE.md**: This file - visual project structure

### Configuration
- **next.config.js**: Next.js configuration with PWA plugin and caching strategies
- **tailwind.config.ts**: Brand colors (greens and browns) and theme customization
- **tsconfig.json**: TypeScript strict mode with path aliases
- **.env.local.example**: Template for required environment variables

### Pages (app/)
- **layout.tsx**: Root layout with header, offline indicator, and PWA meta tags
- **page.tsx**: Home page showing list of available routes
- **route/[routeId]/page.tsx**: Dynamic route detail page with map and stops

### API Routes (app/api/)
- **routes/[routeId]/route.ts**: Fetches stops with customer data for a route
- **pickups/route.ts**: Creates new pickup events (append-only)

### Components
- **Header.tsx**: Top navigation with FXBG Compost branding
- **RouteList.tsx**: Displays all routes from database with refresh
- **StopList.tsx**: Renders list of stops for a route
- **StopCard.tsx**: Individual stop with customer info, flags, map link, contact, and logger
- **ContactWidget.tsx**: Click-to-call and click-to-text buttons
- **PickupLogger.tsx**: Form for logging pickups with driver initials validation
- **MapWidget.tsx**: Google Maps with numbered markers for each stop
- **OfflineIndicator.tsx**: Shows online/offline status and sync queue

### Library
- **supabase.ts**: Configured Supabase client for database access
- **types.ts**: TypeScript interfaces for Customer, Stop, Route, PickupEvent
- **utils.ts**: Helper functions for validation, formatting, and offline queue management

### Public Assets
- **manifest.json**: PWA configuration (name, icons, colors, display mode)
- **sw.js**: Service worker (auto-generated by next-pwa)
- **workbox-*.js**: Workbox runtime (auto-generated by next-pwa)

## Data Flow

```
1. User opens app
   â†“
2. RouteList fetches routes from Supabase
   â†“
3. User selects a route
   â†“
4. Route page fetches stops via API route
   â†“
5. MapWidget geocodes addresses and displays markers
   â†“
6. User clicks "Log Pickup" on a stop
   â†“
7. PickupLogger validates input (initials, notes, completion)
   â†“
8. Check if online
   â”œâ”€ Online: POST to /api/pickups â†’ Insert to Supabase
   â””â”€ Offline: Queue in localStorage â†’ Sync when online
```

## Database Schema

```
customers â”€â”€â”€â”€â”€â”
               â”‚
               â”œâ”€â†’ stops â”€â”€â”€â”€â”€â†’ pickup_events
               â”‚      â”‚
routes â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                      â”‚
               (stop_order: 1, 2, 3...)
```

## Key Directories

- **`/app`**: Next.js 13+ App Router pages and API routes
- **`/components`**: Reusable React components
- **`/lib`**: Utility functions and configurations
- **`/public`**: Static assets (manifest, icons, service worker)

## Build Output

After `npm run build`:
- **`.next/`**: Next.js build output (gitignored)
- **`public/sw.js`**: Generated service worker
- **`public/workbox-*.js`**: Workbox runtime files

## Development Files

- **`.next/`**: Build cache (gitignored)
- **`node_modules/`**: NPM dependencies (gitignored)
- **`.env.local`**: Local environment variables (gitignored)

## Icons Needed

Replace placeholders in `/public/`:
- `favicon.ico` (16x16, 32x32)
- `icon-192x192.png` (192x192 for PWA)
- `icon-512x512.png` (512x512 for PWA)

Generate from FXBG Compost logo using:
- [RealFaviconGenerator](https://realfavicongenerator.net/)
- [PWA Asset Generator](https://github.com/elegantapp/pwa-asset-generator)
